{"ast":null,"code":"import _objectSpread from\"/Users/apple/Documents/work/git/nest-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/apple/Documents/work/git/nest-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useForm}from\"react-hook-form\";import React,{useEffect,useState}from\"react\";import{Button,Form}from\"react-bootstrap\";import{useLazyQuery}from\"@apollo/client\";import{GET_USER}from\"../../process/apollo/GqlData\";import{useParams}from\"react-router\";export var EditForm=function EditForm(_ref){var update=_ref.update,create=_ref.create;var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userId=_useState2[0],setUserId=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,formState=_useForm.formState;useEffect(function(){setUserId(null);if(id){setUserId(id);getUser();}},[id]);useEffect(function(){register({name:\"phone\"});register({name:\"password\"});register({name:\"firstName\"});register({name:\"lastName\"});register({name:\"email\"});register({name:\"role\"});},[register]);var _useLazyQuery=useLazyQuery(GET_USER,{variables:{filter:{id:Number(userId)}},onCompleted:function onCompleted(_ref2){var user=_ref2.user;if(user){Object.entries(user).forEach(function(entry){var key=entry[0];var value=entry[1];setValue(key,value);});}}}),_useLazyQuery2=_slicedToArray(_useLazyQuery,2),getUser=_useLazyQuery2[0],loading=_useLazyQuery2[1].loading;var onSubmit=function onSubmit(data){debugger;if(id){update({variables:_objectSpread(_objectSpread({},data),{},{id:Number(id)})});}else{create({variables:_objectSpread({},data)});}};var handleChange=function handleChange(event){event.preventDefault();setValue(event.target.name,event.target.value);};if(loading){console.log('getting user');}return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"phone\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Phone\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"numeric\",placeholder:\"Phone\",name:\"phone\",onChange:handleChange,ref:register}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",onChange:handleChange,ref:register})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"firstName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"First Name\",name:\"firstName\",onChange:handleChange,ref:register})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"lastName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Last Name\",name:\"lastName\",onChange:handleChange,ref:register})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Email\",name:\"email\",onChange:handleChange,ref:register})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:formState.isSubmitting,children:id?'Update':'Create'})]});};","map":{"version":3,"sources":["/Users/apple/Documents/work/git/nest-react/client/src/ui/components/EditForm.tsx"],"names":["useForm","React","useEffect","useState","Button","Form","useLazyQuery","GET_USER","useParams","EditForm","update","create","id","userId","setUserId","register","handleSubmit","setValue","formState","getUser","name","variables","filter","Number","onCompleted","user","Object","entries","forEach","entry","key","value","loading","onSubmit","data","handleChange","event","preventDefault","target","console","log","isSubmitting"],"mappings":"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","sourcesContent":["import {useForm} from \"react-hook-form\";\nimport React, {useEffect, useState} from \"react\";\nimport {Button, Form} from \"react-bootstrap\";\nimport {IUser} from \"../../process/helpers/Models\";\nimport {useLazyQuery} from \"@apollo/client\";\nimport {GET_USER} from \"../../process/apollo/GqlData\";\nimport {RegisterFormVariables} from \"./RegisterForm\";\nimport {useParams} from \"react-router\";\n\nexport interface IEditProps {\n\tupdate: (a: {\n\t\tvariables: IUser\n\t}) => void,\n\tcreate: (a: {\n\t\tvariables: IUser\n\t}) => void\n}\n\nexport const EditForm = ({ update, create }: IEditProps) => {\n\n\tconst { id }: any = useParams();\n\n\tconst [userId, setUserId] = useState<number | null>(null)\n\n\tconst { register, handleSubmit, setValue, formState } = useForm();\n\n\tuseEffect(() => {\n\t\tsetUserId(null);\n\t\tif (id) {\n\t\t\tsetUserId(id);\n\t\t\tgetUser();\n\t\t}\n\t}, [id])\n\n\tuseEffect(() => {\n\t\tregister({ name: \"phone\" });\n\t\tregister({ name: \"password\" });\n\t\tregister({ name: \"firstName\" });\n\t\tregister({ name: \"lastName\" });\n\t\tregister({ name: \"email\" });\n\t\tregister({ name: \"role\" });\n\t}, [register]);\n\n\tconst [getUser, { loading }] = useLazyQuery(GET_USER, {\n\t\tvariables: {filter: {id: Number(userId)}},\n\t\tonCompleted({ user }) {\n\t\t\tif (user) {\n\t\t\t\tObject.entries(user).forEach( entry=> {\n\t\t\t\t\tconst key = entry[0];\n\t\t\t\t\tconst value = entry[1]\n\t\t\t\t\tsetValue(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n\n\tconst onSubmit = (data: IUser) => {\n\t\tdebugger;\n\t\tif (id) {\n\t\t\tupdate( {variables: {...data, id: Number(id)} })\n\t\t} else {\n\t\t\tcreate( {variables: {...data} })\n\t\t}\n\t};\n\n\tconst handleChange = (event: any) => {\n\t\tevent.preventDefault();\n\t\tsetValue(event.target.name, event.target.value);\n\t};\n\n\tif (loading) {\n\t\tconsole.log('getting user');\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit(onSubmit)}>\n\t\t\t<Form.Group controlId=\"phone\">\n\t\t\t\t<Form.Label>Phone</Form.Label>\n\t\t\t\t<Form.Control\n\t\t\t\t\ttype=\"numeric\"\n\t\t\t\t\tplaceholder=\"Phone\"\n\t\t\t\t\tname=\"phone\" onChange={handleChange}\n\t\t\t\t\tref={register} />\n\t\t\t\t<Form.Text className=\"text-muted\">\n\t\t\t\t\tWe'll never share your email with anyone else.\n\t\t\t\t</Form.Text>\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"password\">\n\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t<Form.Control type=\"password\"\n\t\t\t\t\t\t\t  placeholder=\"Password\"\n\t\t\t\t\t\t\t  name=\"password\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"firstName\">\n\t\t\t\t<Form.Label>First Name</Form.Label>\n\t\t\t\t<Form.Control type=\"text\"\n\t\t\t\t\t\t\t  placeholder=\"First Name\"\n\t\t\t\t\t\t\t  name=\"firstName\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"lastName\">\n\t\t\t\t<Form.Label>Last Name</Form.Label>\n\t\t\t\t<Form.Control type=\"text\"\n\t\t\t\t\t\t\t  placeholder=\"Last Name\"\n\t\t\t\t\t\t\t  name=\"lastName\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"email\">\n\t\t\t\t<Form.Label>Email</Form.Label>\n\t\t\t\t<Form.Control type=\"email\"\n\t\t\t\t\t\t\t  placeholder=\"Email\"\n\t\t\t\t\t\t\t  name=\"email\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Button variant=\"primary\" type=\"submit\" disabled={formState.isSubmitting}>\n\t\t\t\t{id ? 'Update' : 'Create'}\n\t\t\t</Button>\n\t\t</Form>\n\t)\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}