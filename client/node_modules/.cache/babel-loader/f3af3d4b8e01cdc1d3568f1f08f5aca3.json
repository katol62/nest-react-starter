{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/apple/Documents/work/git/nest-react/client/src/ui/components/EditForm.tsx\",\n    _s = $RefreshSig$();\n\nimport { useForm } from \"react-hook-form\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport { useLazyQuery } from \"@apollo/client\";\nimport { GET_USER } from \"../../process/apollo/GqlData\";\nimport { useParams } from \"react-router\";\nexport const EditForm = ({\n  update,\n  create\n}) => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [userId, setUserId] = useState(null);\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState\n  } = useForm();\n  useEffect(() => {\n    setUserId(null);\n\n    if (id) {\n      setUserId(id);\n      getUser();\n    }\n  }, [id]);\n  useEffect(() => {\n    register({\n      name: \"phone\"\n    });\n    register({\n      name: \"password\"\n    });\n    register({\n      name: \"firstName\"\n    });\n    register({\n      name: \"lastName\"\n    });\n    register({\n      name: \"email\"\n    });\n    register({\n      name: \"role\"\n    });\n  }, [register]);\n  const [getUser, {\n    loading\n  }] = useLazyQuery(GET_USER, {\n    variables: {\n      filter: {\n        id: Number(userId)\n      }\n    },\n\n    onCompleted({\n      user\n    }) {\n      if (user) {\n        Object.entries(user).forEach(entry => {\n          const key = entry[0];\n          const value = entry[1];\n          setValue(key, value);\n        });\n      }\n    }\n\n  });\n\n  const onSubmit = data => {\n    debugger;\n\n    if (id) {\n      update({\n        variables: { ...data,\n          id: Number(id)\n        }\n      });\n    } else {\n      create({\n        variables: { ...data\n        }\n      });\n    }\n  };\n\n  const handleChange = event => {\n    event.preventDefault();\n    setValue(event.target.name, event.target.value);\n  };\n\n  if (loading) {\n    console.log('getting user');\n  }\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"phone\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Phone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"numeric\",\n        placeholder: \"Phone\",\n        name: \"phone\",\n        onChange: handleChange,\n        ref: register\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n        className: \"text-muted\",\n        children: \"We'll never share your email with anyone else.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"password\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"password\",\n        placeholder: \"Password\",\n        name: \"password\",\n        onChange: handleChange,\n        ref: register\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"firstName\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"First Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"text\",\n        placeholder: \"First Name\",\n        name: \"firstName\",\n        onChange: handleChange,\n        ref: register\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"lastName\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Last Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"text\",\n        placeholder: \"Last Name\",\n        name: \"lastName\",\n        onChange: handleChange,\n        ref: register\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n      controlId: \"email\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"email\",\n        placeholder: \"Email\",\n        name: \"email\",\n        onChange: handleChange,\n        ref: register\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      disabled: formState.isSubmitting,\n      children: id ? 'Update' : 'Create'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 3\n  }, this);\n};\n\n_s(EditForm, \"sL284rf32pg+kVmY8ihEp4C9RQk=\", false, function () {\n  return [useParams, useForm, useLazyQuery];\n});\n\n_c = EditForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditForm\");","map":{"version":3,"sources":["/Users/apple/Documents/work/git/nest-react/client/src/ui/components/EditForm.tsx"],"names":["useForm","React","useEffect","useState","Button","Form","useLazyQuery","GET_USER","useParams","EditForm","update","create","id","userId","setUserId","register","handleSubmit","setValue","formState","getUser","name","loading","variables","filter","Number","onCompleted","user","Object","entries","forEach","entry","key","value","onSubmit","data","handleChange","event","preventDefault","target","console","log","isSubmitting"],"mappings":"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","sourcesContent":["import {useForm} from \"react-hook-form\";\nimport React, {useEffect, useState} from \"react\";\nimport {Button, Form} from \"react-bootstrap\";\nimport {IUser} from \"../../process/helpers/Models\";\nimport {useLazyQuery} from \"@apollo/client\";\nimport {GET_USER} from \"../../process/apollo/GqlData\";\nimport {RegisterFormVariables} from \"./RegisterForm\";\nimport {useParams} from \"react-router\";\n\nexport interface IEditProps {\n\tupdate: (a: {\n\t\tvariables: IUser\n\t}) => void,\n\tcreate: (a: {\n\t\tvariables: IUser\n\t}) => void\n}\n\nexport const EditForm = ({ update, create }: IEditProps) => {\n\n\tconst { id }: any = useParams();\n\n\tconst [userId, setUserId] = useState<number | null>(null)\n\n\tconst { register, handleSubmit, setValue, formState } = useForm();\n\n\tuseEffect(() => {\n\t\tsetUserId(null);\n\t\tif (id) {\n\t\t\tsetUserId(id);\n\t\t\tgetUser();\n\t\t}\n\t}, [id])\n\n\tuseEffect(() => {\n\t\tregister({ name: \"phone\" });\n\t\tregister({ name: \"password\" });\n\t\tregister({ name: \"firstName\" });\n\t\tregister({ name: \"lastName\" });\n\t\tregister({ name: \"email\" });\n\t\tregister({ name: \"role\" });\n\t}, [register]);\n\n\tconst [getUser, { loading }] = useLazyQuery(GET_USER, {\n\t\tvariables: {filter: {id: Number(userId)}},\n\t\tonCompleted({ user }) {\n\t\t\tif (user) {\n\t\t\t\tObject.entries(user).forEach( entry=> {\n\t\t\t\t\tconst key = entry[0];\n\t\t\t\t\tconst value = entry[1]\n\t\t\t\t\tsetValue(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n\n\tconst onSubmit = (data: IUser) => {\n\t\tdebugger;\n\t\tif (id) {\n\t\t\tupdate( {variables: {...data, id: Number(id)} })\n\t\t} else {\n\t\t\tcreate( {variables: {...data} })\n\t\t}\n\t};\n\n\tconst handleChange = (event: any) => {\n\t\tevent.preventDefault();\n\t\tsetValue(event.target.name, event.target.value);\n\t};\n\n\tif (loading) {\n\t\tconsole.log('getting user');\n\t}\n\n\treturn (\n\t\t<Form onSubmit={handleSubmit(onSubmit)}>\n\t\t\t<Form.Group controlId=\"phone\">\n\t\t\t\t<Form.Label>Phone</Form.Label>\n\t\t\t\t<Form.Control\n\t\t\t\t\ttype=\"numeric\"\n\t\t\t\t\tplaceholder=\"Phone\"\n\t\t\t\t\tname=\"phone\" onChange={handleChange}\n\t\t\t\t\tref={register} />\n\t\t\t\t<Form.Text className=\"text-muted\">\n\t\t\t\t\tWe'll never share your email with anyone else.\n\t\t\t\t</Form.Text>\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"password\">\n\t\t\t\t<Form.Label>Password</Form.Label>\n\t\t\t\t<Form.Control type=\"password\"\n\t\t\t\t\t\t\t  placeholder=\"Password\"\n\t\t\t\t\t\t\t  name=\"password\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"firstName\">\n\t\t\t\t<Form.Label>First Name</Form.Label>\n\t\t\t\t<Form.Control type=\"text\"\n\t\t\t\t\t\t\t  placeholder=\"First Name\"\n\t\t\t\t\t\t\t  name=\"firstName\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"lastName\">\n\t\t\t\t<Form.Label>Last Name</Form.Label>\n\t\t\t\t<Form.Control type=\"text\"\n\t\t\t\t\t\t\t  placeholder=\"Last Name\"\n\t\t\t\t\t\t\t  name=\"lastName\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Form.Group controlId=\"email\">\n\t\t\t\t<Form.Label>Email</Form.Label>\n\t\t\t\t<Form.Control type=\"email\"\n\t\t\t\t\t\t\t  placeholder=\"Email\"\n\t\t\t\t\t\t\t  name=\"email\"\n\t\t\t\t\t\t\t  onChange={handleChange}\n\t\t\t\t\t\t\t  ref={register} />\n\t\t\t</Form.Group>\n\t\t\t<Button variant=\"primary\" type=\"submit\" disabled={formState.isSubmitting}>\n\t\t\t\t{id ? 'Update' : 'Create'}\n\t\t\t</Button>\n\t\t</Form>\n\t)\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}